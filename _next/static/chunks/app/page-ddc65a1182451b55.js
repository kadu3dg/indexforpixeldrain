(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9943:function(t,e,a){Promise.resolve().then(a.bind(a,4413))},4413:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return m}});var i=a(3827),s=a(4090);class n{async fetchWithAuth(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URL(this.baseUrl,window.location.origin);a.searchParams.set("endpoint",t),this.apiKey&&a.searchParams.set("apiKey",this.apiKey);let i=await fetch(a.toString(),{...e,headers:{Accept:"application/json","Content-Type":"application/json",...e.headers}});if(!i.ok){let t=await i.text();throw Error("Erro na API do Pixeldrain: ".concat(i.status," ").concat(i.statusText,"\n").concat(t))}return i.json()}async getFiles(){return(await this.fetchWithAuth("/user/files")).files||[]}async getUserLists(){return(await this.fetchWithAuth("/user/lists")).lists||[]}async createAlbum(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return await this.fetchWithAuth("/list",{method:"POST",body:JSON.stringify({title:t,description:e,files:[]})})}async addFileToAlbum(t,e){await this.fetchWithAuth("/list/".concat(t,"/file/").concat(e),{method:"POST"})}async removeFileFromAlbum(t,e){await this.fetchWithAuth("/list/".concat(t,"/file/").concat(e),{method:"DELETE"})}async deleteAlbum(t){await this.fetchWithAuth("/list/".concat(t),{method:"DELETE"})}constructor(t=""){this.apiKey=t,this.baseUrl="/api/pixeldrain"}}var r=a(5195),l=a(543),c=a(9240),o=a(4981),h=a(6910),d=a(9835),u=a(5996);let x=(0,a(5035).ZP)(r.Z)(t=>{let{theme:e}=t;return{margin:e.spacing(1),width:"100%",maxWidth:600}});function m(){let[t,e]=(0,s.useState)(""),[a,r]=(0,s.useState)([]),[m,f]=(0,s.useState)([]),[w,p]=(0,s.useState)(!1),[y,j]=(0,s.useState)(null),v=new n(t),g=async()=>{if(!t){j("Por favor, insira sua chave API do Pixeldrain");return}p(!0),j(null);try{let t=await v.getFiles();r(t);let e=await v.getUserLists();f(e)}catch(t){console.error("Erro ao carregar conte\xfado:",t),j(t instanceof Error?t.message:"Erro ao carregar conte\xfado")}finally{p(!1)}};return(0,s.useEffect)(()=>{t&&g()},[t]),(0,i.jsxs)("main",{className:"flex min-h-screen flex-col items-center p-4",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"\xcdndice Pixeldrain"}),(0,i.jsx)(l.Z,{sx:{width:"100%",maxWidth:600,mb:4},children:(0,i.jsx)(c.Z,{fullWidth:!0,placeholder:"Insira sua chave API do Pixeldrain",value:t,onChange:t=>e(t.target.value),type:"password"})}),y&&(0,i.jsx)(o.Z,{severity:"error",sx:{width:"100%",maxWidth:600,mb:2},children:y}),w?(0,i.jsx)(h.Z,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("section",{className:"w-full max-w-3xl",children:[(0,i.jsxs)(d.Z,{variant:"h5",gutterBottom:!0,children:["\xc1lbuns (",m.length,")"]}),m.map(t=>(0,i.jsx)(x,{children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(d.Z,{variant:"h6",children:t.title}),(0,i.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:t.description}),t.date_created&&(0,i.jsxs)(d.Z,{variant:"caption",display:"block",children:["Criado em: ",new Date(t.date_created).toLocaleDateString()]}),(0,i.jsxs)(d.Z,{variant:"body2",children:["Arquivos: ",t.files.length]})]})},t.id))]}),(0,i.jsxs)("section",{className:"w-full max-w-3xl mt-8",children:[(0,i.jsxs)(d.Z,{variant:"h5",gutterBottom:!0,children:["Arquivos (",a.length,")"]}),a.map(t=>(0,i.jsx)(x,{children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(d.Z,{variant:"h6",children:t.name}),(0,i.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Tamanho: ",(t.size/1024/1024).toFixed(2)," MB"]}),(0,i.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Views: ",t.views]}),(0,i.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Downloads: ",t.downloads]}),t.date_upload&&(0,i.jsxs)(d.Z,{variant:"caption",display:"block",children:["Enviado em: ",new Date(t.date_upload).toLocaleDateString()]})]})},t.id))]})]})]})}}},function(t){t.O(0,[980,971,69,744],function(){return t(t.s=9943)}),_N_E=t.O()}]);