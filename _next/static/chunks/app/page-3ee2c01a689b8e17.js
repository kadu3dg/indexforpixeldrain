(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{669:(e,t,a)=>{"use strict";a.d(t,{K:()=>r});var i=a(3464),o=a(9641).Buffer;class r{getAuthUrl(e){let t=o.from(this.apiKey+":").toString("base64");return"".concat(this.baseUrl).concat(encodeURIComponent("https://pixeldrain.com/api".concat(e)),"&headers=").concat(encodeURIComponent(JSON.stringify({Authorization:"Basic ".concat(t),Accept:"application/json","Content-Type":"application/json"})))}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.getAuthUrl(e),o={...t,timeout:this.timeout,headers:{Accept:"application/json"}};try{let e=await (0,i.A)(a,o);if(!e.data||!e.data.contents)throw Error("Resposta inv\xe1lida do servidor proxy");let t=JSON.parse(e.data.contents);if(e.data.status&&403===e.data.status.http_code)throw Error("Acesso negado. Verifique sua API key.");return t}catch(t){if(this.logError("Erro na requisi\xe7\xe3o para ".concat(e),t),i.A.isAxiosError(t)){var r,s,n;if((null===(r=t.response)||void 0===r?void 0:r.status)===403)throw Error("Acesso negado. Verifique sua API key.");throw Error((null===(n=t.response)||void 0===n?void 0:null===(s=n.data)||void 0===s?void 0:s.message)||t.message)}throw t}}logError(e,t){var a,i,o,r,s;console.error("[PixeldrainService Error] ".concat(e),{errorType:null==t?void 0:null===(a=t.constructor)||void 0===a?void 0:a.name,message:null==t?void 0:t.message,status:null==t?void 0:null===(i=t.response)||void 0===i?void 0:i.status,data:null==t?void 0:null===(o=t.response)||void 0===o?void 0:o.data,url:null==t?void 0:null===(r=t.config)||void 0===r?void 0:r.url,method:null==t?void 0:null===(s=t.config)||void 0===s?void 0:s.method})}async getListDetails(e){try{let t=await this.makeRequest("/list/".concat(e));if(!t||!t.files)throw Error("Dados do \xe1lbum inv\xe1lidos ou vazios");let a=t.files.map(e=>({id:e.id||"",name:e.name||"Arquivo sem nome",size:e.size||0,mime_type:e.mime_type||"",views:e.views||0,downloads:e.downloads||0,date_upload:e.date_upload||new Date().toISOString(),date_last_view:e.date_last_view||new Date().toISOString(),hash_sha256:e.hash_sha256||"",can_edit:e.can_edit||!1,description:e.description||""}));return{...t,files:a,file_count:a.length}}catch(e){throw this.logError("Erro ao buscar detalhes do \xe1lbum",e),e}}async getUserLists(){try{return(await this.makeRequest("/user/lists")).map(e=>({id:e.id||"",title:e.title||"\xc1lbum sem t\xedtulo",description:e.description||"",date_created:e.date_created||new Date().toISOString(),files:[],can_edit:e.can_edit||!1,file_count:e.file_count||0}))}catch(e){throw this.logError("Erro ao buscar listas do usu\xe1rio",e),e}}async getFiles(){try{return(await this.makeRequest("/user/files")).map(e=>({id:e.id||"",name:e.name||"Arquivo sem nome",size:e.size||0,mime_type:e.mime_type||"",views:e.views||0,downloads:e.downloads||0,date_upload:e.date_upload||new Date().toISOString(),date_last_view:e.date_last_view||new Date().toISOString(),hash_sha256:e.hash_sha256||"",can_edit:e.can_edit||!1,description:e.description||""}))}catch(e){throw this.logError("Erro ao buscar arquivos do usu\xe1rio",e),e}}getFileViewUrl(e){return"https://pixeldrain.com/u/".concat(e)}getFileDirectUrl(e){return"https://pixeldrain.com/api/file/".concat(e)}getFileThumbnailUrl(e){return"https://pixeldrain.com/api/file/".concat(e,"/thumbnail")}async createAlbum(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.makeRequest("/list",{method:"POST",data:{title:e,description:t,files:[]}})}async addFileToAlbum(e,t){await this.makeRequest("/list/".concat(e,"/file/").concat(t),{method:"POST"})}async removeFileFromAlbum(e,t){await this.makeRequest("/list/".concat(e,"/file/").concat(t),{method:"DELETE"})}async deleteAlbum(e){await this.makeRequest("/list/".concat(e),{method:"DELETE"})}async checkAlbumAvailability(e){console.log("[Diagn\xf3stico] Verificando disponibilidade do \xe1lbum: ".concat(e));try{let t=await i.A.head("".concat(this.baseUrl,"/list/").concat(e),{timeout:this.timeout,validateStatus:e=>200===e||404===e});return console.log("[Diagn\xf3stico] Status da verifica\xe7\xe3o de disponibilidade:",{status:t.status,headers:t.headers}),200===t.status}catch(e){return this.logError("Erro ao verificar disponibilidade do \xe1lbum",e),!1}}constructor(){this.baseUrl="https://api.allorigins.win/get?url=",this.apiKey="b34f7bc6-f084-40ca-aedd-eab6d8aa8a85",this.timeout=15e3}}},1057:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var i=a(5155),o=a(2115),r=a(669),s=a(4256),n=a(3088),l=a(9915),c=a(3100),d=a(3339),u=a(5857),h=a(7833),m=a(5695);let f=(0,h.Ay)(s.A)(e=>{let{theme:t}=e;return{margin:t.spacing(1),width:"100%",maxWidth:600,backgroundColor:"#1a1a1a",color:"#ffffff","& .MuiTypography-root":{color:"#ffffff"},"& .MuiTypography-colorTextSecondary":{color:"#aaaaaa"}}});function p(){let e=(0,m.useRouter)();return(0,o.useEffect)(()=>{let t=new URLSearchParams(window.location.search).get("album");t&&(console.log("Redirecionando para \xe1lbum:",t),e.push("/album/".concat(t)))},[e]),null}function v(){let[e,t]=(0,o.useState)([]),[a,s]=(0,o.useState)([]),[h,v]=(0,o.useState)(!1),[g,w]=(0,o.useState)(null),x=(0,m.useRouter)(),y=new r.K,b=async()=>{v(!0),w(null);try{let e=await y.getFiles();t(e);let a=await y.getUserLists();s(a)}catch(t){console.error("Erro ao carregar conte\xfado:",t);let e=t instanceof Error?t.message:"Ocorreu um erro ao carregar o conte\xfado. Por favor, tente novamente mais tarde.";w("".concat(e," ").concat(""))}finally{v(!1)}};return(0,o.useEffect)(()=>{b()},[]),(0,i.jsxs)("main",{className:"flex min-h-screen flex-col items-center p-4",style:{backgroundColor:"#121212",color:"#ffffff"},children:[(0,i.jsx)(o.Suspense,{fallback:null,children:(0,i.jsx)(p,{})}),(0,i.jsx)("h1",{className:"text-4xl font-bold mb-8 text-white",children:"\xcdndice Pixeldrain"}),g&&(0,i.jsx)(n.A,{severity:"error",sx:{width:"100%",maxWidth:600,mb:2,backgroundColor:"#ff000033",color:"#ffffff"},children:g}),h?(0,i.jsx)(l.A,{sx:{color:"#ffffff"}}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("section",{className:"w-full max-w-3xl",children:[(0,i.jsxs)(c.A,{variant:"h5",gutterBottom:!0,sx:{color:"#ffffff"},children:["\xc1lbuns (",a.length,")"]}),a.map(e=>{var t;return(0,i.jsx)(f,{children:(0,i.jsxs)(d.A,{children:[(0,i.jsx)(c.A,{variant:"h6",children:e.title}),(0,i.jsx)(c.A,{variant:"body2",color:"text.secondary",children:e.description}),e.date_created&&(0,i.jsxs)(c.A,{variant:"caption",display:"block",children:["Criado em: ",new Date(e.date_created).toLocaleDateString()]}),(0,i.jsxs)(c.A,{variant:"body2",children:["Arquivos: ",(null===(t=e.files)||void 0===t?void 0:t.length)||0]}),(0,i.jsx)(u.A,{variant:"contained",color:"primary",onClick:()=>x.push("/album/".concat(e.id)),sx:{mt:2},children:"Ver \xc1lbum"})]})},e.id)})]}),(0,i.jsxs)("section",{className:"w-full max-w-3xl mt-8",children:[(0,i.jsxs)(c.A,{variant:"h5",gutterBottom:!0,sx:{color:"#ffffff"},children:["Arquivos (",e.length,")"]}),e.map(e=>(0,i.jsx)(f,{children:(0,i.jsxs)(d.A,{children:[(0,i.jsx)(c.A,{variant:"h6",children:e.name}),(0,i.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Tamanho: ",(e.size/1024/1024).toFixed(2)," MB"]}),(0,i.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Views: ",e.views]}),e.date_upload&&(0,i.jsxs)(c.A,{variant:"caption",display:"block",children:["Enviado em: ",new Date(e.date_upload).toLocaleDateString()]}),(0,i.jsx)(u.A,{variant:"contained",color:"primary",onClick:()=>x.push("/file/".concat(e.id)),sx:{mt:2},children:"Visualizar"})]})},e.id))]})]})]})}},4906:(e,t,a)=>{Promise.resolve().then(a.bind(a,1057))}},e=>{var t=t=>e(e.s=t);e.O(0,[295,657,441,684,358],()=>t(4906)),_N_E=e.O()}]);