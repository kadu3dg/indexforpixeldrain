(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9943:function(t,e,r){Promise.resolve().then(r.bind(r,4413))},4413:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return u}});var a=r(3827),i=r(4090);class o{async fetchWithAuth(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URL(this.workerUrl);r.searchParams.set("endpoint",t);let a=new Headers(e.headers);a.set("Accept","application/json"),a.set("Content-Type","application/json");let i={...e,headers:a,mode:"cors",credentials:"omit"};try{let t=await fetch(r.toString(),i);if(!t.ok){let e=await t.text();throw console.error("Erro na resposta:",{status:t.status,statusText:t.statusText,data:e}),Error("Erro na API do Pixeldrain: ".concat(t.status," ").concat(t.statusText,"\n").concat(e))}return t.json()}catch(t){throw console.error("Erro na requisi\xe7\xe3o:",t),t}}async getFiles(){try{return(await this.fetchWithAuth("/user/files")).files||[]}catch(t){return console.error("Erro ao buscar arquivos:",t),[]}}async getUserLists(){try{return(await this.fetchWithAuth("/user/lists")).lists||[]}catch(t){return console.error("Erro ao buscar \xe1lbuns:",t),[]}}async getListDetails(t){try{return await this.fetchWithAuth("/list/".concat(t))}catch(e){return console.error("Erro ao buscar detalhes do \xe1lbum ".concat(t,":"),e),{id:t,title:"Erro ao carregar",description:"",date_created:new Date().toISOString(),files:[],can_edit:!1}}}getFileViewUrl(t){return"https://pixeldrain.com/v/".concat(t)}getFileThumbnailUrl(t){return"https://pixeldrain.com/api/file/".concat(t,"/thumbnail")}async createAlbum(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.fetchWithAuth("/list",{method:"POST",body:JSON.stringify({title:t,description:e,files:[]})})}async addFileToAlbum(t,e){await this.fetchWithAuth("/list/".concat(t,"/file/").concat(e),{method:"POST"})}async removeFileFromAlbum(t,e){await this.fetchWithAuth("/list/".concat(t,"/file/").concat(e),{method:"DELETE"})}async deleteAlbum(t){await this.fetchWithAuth("/list/".concat(t),{method:"DELETE"})}constructor(){this.workerUrl="https://pixeldrain-proxy.kadulavinia.workers.dev"}}var s=r(5195),n=r(5375),c=r(6910),l=r(4378),h=r(5996),d=r(6285);let f=(0,r(5035).ZP)(s.Z)(t=>{let{theme:e}=t;return{margin:e.spacing(1),width:"100%",maxWidth:600,backgroundColor:"#1a1a1a",color:"#ffffff","& .MuiTypography-root":{color:"#ffffff"},"& .MuiTypography-colorTextSecondary":{color:"#aaaaaa"}}});function u(){let[t,e]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[u,x]=(0,i.useState)(!1),[m,p]=(0,i.useState)(null),y=new o,w=async()=>{x(!0),p(null);try{let t=await y.getFiles();e(t);let r=await y.getUserLists();s(r)}catch(t){console.error("Erro ao carregar conte\xfado:",t),p(t instanceof Error?t.message:"Erro ao carregar conte\xfado")}finally{x(!1)}};return(0,i.useEffect)(()=>{w()},[]),(0,a.jsxs)("main",{className:"flex min-h-screen flex-col items-center p-4",style:{backgroundColor:"#121212",color:"#ffffff"},children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-8 text-white",children:"\xcdndice Pixeldrain"}),m&&(0,a.jsx)(n.Z,{severity:"error",sx:{width:"100%",maxWidth:600,mb:2,backgroundColor:"#ff000033",color:"#ffffff"},children:m}),u?(0,a.jsx)(c.Z,{sx:{color:"#ffffff"}}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:"w-full max-w-3xl",children:[(0,a.jsxs)(l.Z,{variant:"h5",gutterBottom:!0,sx:{color:"#ffffff"},children:["\xc1lbuns (",r.length,")"]}),r.map(t=>{var e;return(0,a.jsx)(f,{children:(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(l.Z,{variant:"h6",children:t.title}),(0,a.jsx)(l.Z,{variant:"body2",color:"text.secondary",children:t.description}),t.date_created&&(0,a.jsxs)(l.Z,{variant:"caption",display:"block",children:["Criado em: ",new Date(t.date_created).toLocaleDateString()]}),(0,a.jsxs)(l.Z,{variant:"body2",children:["Arquivos: ",(null===(e=t.files)||void 0===e?void 0:e.length)||0]}),(0,a.jsx)(d.Z,{variant:"contained",color:"primary",href:"/album/".concat(t.id),sx:{mt:2},children:"Ver \xc1lbum"})]})},t.id)})]}),(0,a.jsxs)("section",{className:"w-full max-w-3xl mt-8",children:[(0,a.jsxs)(l.Z,{variant:"h5",gutterBottom:!0,sx:{color:"#ffffff"},children:["Arquivos (",t.length,")"]}),t.map(t=>(0,a.jsx)(f,{children:(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(l.Z,{variant:"h6",children:t.name}),(0,a.jsxs)(l.Z,{variant:"body2",color:"text.secondary",children:["Tamanho: ",(t.size/1024/1024).toFixed(2)," MB"]}),(0,a.jsxs)(l.Z,{variant:"body2",color:"text.secondary",children:["Views: ",t.views]}),t.date_upload&&(0,a.jsxs)(l.Z,{variant:"caption",display:"block",children:["Enviado em: ",new Date(t.date_upload).toLocaleDateString()]}),(0,a.jsx)(d.Z,{variant:"contained",color:"primary",href:"/file/".concat(t.id),sx:{mt:2},children:"Visualizar"})]})},t.id))]})]})]})}}},function(t){t.O(0,[31,971,69,744],function(){return t(t.s=9943)}),_N_E=t.O()}]);