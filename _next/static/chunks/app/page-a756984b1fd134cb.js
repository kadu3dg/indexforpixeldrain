(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{669:(e,t,a)=>{"use strict";a.d(t,{K:()=>r});var o=a(3464);class r{logError(e,t){var a,o,r,i,s;console.error("[PixeldrainService Error] ".concat(e),{errorType:null==t?void 0:null===(a=t.constructor)||void 0===a?void 0:a.name,message:null==t?void 0:t.message,status:null==t?void 0:null===(o=t.response)||void 0===o?void 0:o.status,data:null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.data,url:null==t?void 0:null===(i=t.config)||void 0===i?void 0:i.url,method:null==t?void 0:null===(s=t.config)||void 0===s?void 0:s.method})}async getListDetails(e){console.log("[Diagn\xf3stico] Tentando carregar \xe1lbum: ".concat(e)),console.log("[Diagn\xf3stico] URL base: ".concat(this.baseUrl));try{var t,a;let r=await this.checkAlbumAvailability(e);if(console.log("[Diagn\xf3stico] Status da verifica\xe7\xe3o de disponibilidade:",{isAvailable:r}),!r)throw Error("\xc1lbum ".concat(e," n\xe3o est\xe1 dispon\xedvel"));let i=await o.A.get("".concat(this.baseUrl,"/list/").concat(e),{timeout:this.timeout,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0",Origin:window.location.origin}});if(console.log("[Diagn\xf3stico] Resposta do \xe1lbum recebida:",{status:i.status,dataReceived:!!i.data,fileCount:(null===(a=i.data)||void 0===a?void 0:null===(t=a.files)||void 0===t?void 0:t.length)||0}),!i.data||!i.data.files)throw Error("Dados do \xe1lbum inv\xe1lidos ou vazios");let s=i.data.files.map(e=>({id:e.id||"",name:e.name||"Arquivo sem nome",size:e.size||0,mime_type:e.mime_type||"",views:e.views||0,downloads:e.downloads||0,date_upload:e.date_upload||new Date().toISOString(),date_last_view:e.date_last_view||new Date().toISOString(),hash_sha256:e.hash_sha256||"",can_edit:e.can_edit||!1,description:e.description||""}));return{...i.data,files:s,file_count:s.length}}catch(t){if(this.logError("Erro ao buscar detalhes do \xe1lbum",t),o.A.isAxiosError(t)){if(t.response)switch(t.response.status){case 404:throw Error("\xc1lbum ".concat(e," n\xe3o encontrado"));case 403:throw Error("Acesso negado ao \xe1lbum ".concat(e));case 500:throw Error("Erro interno do servidor ao buscar \xe1lbum ".concat(e));case 0:throw Error("Erro de CORS ao acessar o \xe1lbum ".concat(e,". Tente novamente mais tarde."))}else if(t.request)throw Error("Sem resposta do servidor ao buscar \xe1lbum ".concat(e,". Verifique sua conex\xe3o."))}throw Error("Falha ao carregar \xe1lbum ".concat(e,": ").concat(t instanceof Error?t.message:"Erro desconhecido"))}}async getAllAlbums(){try{return["GLELo283","z3dL7Lsa"]}catch(e){return this.logError("Erro ao buscar lista de \xe1lbuns",e),[]}}async checkFileAvailability(e){try{let t=await o.A.head("".concat(this.baseUrl,"/file/").concat(e));return 200===t.status}catch(t){return o.A.isAxiosError(t)&&console.warn("Arquivo ".concat(e," n\xe3o dispon\xedvel"),t.message),!1}}async fetchWithAuth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URL(this.baseUrl);a.searchParams.set("endpoint",e);let o=new Headers(t.headers);o.set("Accept","application/json"),o.set("Content-Type","application/json");let r={...t,headers:o,mode:"cors",credentials:"omit"};try{let e=await fetch(a.toString(),r);if(!e.ok){let t=await e.text();throw console.error("Erro na resposta:",{status:e.status,statusText:e.statusText,data:t}),Error("Erro na API do Pixeldrain: ".concat(e.status," ").concat(e.statusText,"\n").concat(t))}return e.json()}catch(e){throw console.error("Erro na requisi\xe7\xe3o:",e),e}}async getFiles(){return[{id:"S8XO23s8",name:"Arquivo de demonstra\xe7\xe3o 1.jpg",size:1024e3,views:10,downloads:5,date_upload:new Date().toISOString(),date_last_view:new Date().toISOString(),mime_type:"image/jpeg",hash_sha256:"",can_edit:!1},{id:"a2b4c6d8",name:"Arquivo de demonstra\xe7\xe3o 2.pdf",size:2048e3,views:5,downloads:2,date_upload:new Date().toISOString(),date_last_view:new Date().toISOString(),mime_type:"application/pdf",hash_sha256:"",can_edit:!1}]}async getUserLists(){try{return[]}catch(e){return console.error("Erro ao buscar listas do usu\xe1rio:",e),[]}}getFileViewUrl(e){return"https://pixeldrain.com/u/".concat(e)}getFileDirectUrl(e){return"".concat(this.baseUrl,"/file/").concat(e)}getFileThumbnailUrl(e){return"".concat(this.baseUrl,"/file/").concat(e,"/thumbnail")}async createAlbum(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.fetchWithAuth("/list",{method:"POST",body:JSON.stringify({title:e,description:t,files:[]})})}async addFileToAlbum(e,t){await this.fetchWithAuth("/list/".concat(e,"/file/").concat(t),{method:"POST"})}async removeFileFromAlbum(e,t){await this.fetchWithAuth("/list/".concat(e,"/file/").concat(t),{method:"DELETE"})}async deleteAlbum(e){await this.fetchWithAuth("/list/".concat(e),{method:"DELETE"})}async checkAlbumAvailability(e){console.log("[Diagn\xf3stico] Verificando disponibilidade do \xe1lbum: ".concat(e));try{let t=await o.A.head("".concat(this.baseUrl,"/list/").concat(e),{timeout:this.timeout,validateStatus:e=>200===e||404===e});return console.log("[Diagn\xf3stico] Status da verifica\xe7\xe3o de disponibilidade:",{status:t.status,headers:t.headers}),200===t.status}catch(e){return this.logError("Erro ao verificar disponibilidade do \xe1lbum",e),!1}}constructor(){this.baseUrl="https://cors-anywhere.herokuapp.com/https://pixeldrain.com/api",this.timeout=15e3}}},1057:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var o=a(5155),r=a(2115),i=a(669),s=a(4256),n=a(3088),l=a(9915),c=a(3100),d=a(3339),u=a(5857),h=a(7833),m=a(5695);let f=(0,h.Ay)(s.A)(e=>{let{theme:t}=e;return{margin:t.spacing(1),width:"100%",maxWidth:600,backgroundColor:"#1a1a1a",color:"#ffffff","& .MuiTypography-root":{color:"#ffffff"},"& .MuiTypography-colorTextSecondary":{color:"#aaaaaa"}}});function v(){let e=(0,m.useRouter)();return(0,r.useEffect)(()=>{let t=new URLSearchParams(window.location.search).get("album");t&&(console.log("Redirecionando para \xe1lbum:",t),e.push("/album/".concat(t)))},[e]),null}function g(){let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)([]),[h,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),w=(0,m.useRouter)(),x=new i.K,y=async()=>{g(!0),b(null);try{let e=await x.getFiles();t(e);let a=await x.getUserLists();s(a)}catch(t){console.error("Erro ao carregar conte\xfado:",t);let e=t instanceof Error?t.message:"Ocorreu um erro ao carregar o conte\xfado. Por favor, tente novamente mais tarde.";b("".concat(e," ").concat(""))}finally{g(!1)}};return(0,r.useEffect)(()=>{y()},[]),(0,o.jsxs)("main",{className:"flex min-h-screen flex-col items-center p-4",style:{backgroundColor:"#121212",color:"#ffffff"},children:[(0,o.jsx)(r.Suspense,{fallback:null,children:(0,o.jsx)(v,{})}),(0,o.jsx)("h1",{className:"text-4xl font-bold mb-8 text-white",children:"\xcdndice Pixeldrain"}),p&&(0,o.jsx)(n.A,{severity:"error",sx:{width:"100%",maxWidth:600,mb:2,backgroundColor:"#ff000033",color:"#ffffff"},children:p}),h?(0,o.jsx)(l.A,{sx:{color:"#ffffff"}}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("section",{className:"w-full max-w-3xl",children:[(0,o.jsxs)(c.A,{variant:"h5",gutterBottom:!0,sx:{color:"#ffffff"},children:["\xc1lbuns (",a.length,")"]}),a.map(e=>{var t;return(0,o.jsx)(f,{children:(0,o.jsxs)(d.A,{children:[(0,o.jsx)(c.A,{variant:"h6",children:e.title}),(0,o.jsx)(c.A,{variant:"body2",color:"text.secondary",children:e.description}),e.date_created&&(0,o.jsxs)(c.A,{variant:"caption",display:"block",children:["Criado em: ",new Date(e.date_created).toLocaleDateString()]}),(0,o.jsxs)(c.A,{variant:"body2",children:["Arquivos: ",(null===(t=e.files)||void 0===t?void 0:t.length)||0]}),(0,o.jsx)(u.A,{variant:"contained",color:"primary",onClick:()=>w.push("/album/".concat(e.id)),sx:{mt:2},children:"Ver \xc1lbum"})]})},e.id)})]}),(0,o.jsxs)("section",{className:"w-full max-w-3xl mt-8",children:[(0,o.jsxs)(c.A,{variant:"h5",gutterBottom:!0,sx:{color:"#ffffff"},children:["Arquivos (",e.length,")"]}),e.map(e=>(0,o.jsx)(f,{children:(0,o.jsxs)(d.A,{children:[(0,o.jsx)(c.A,{variant:"h6",children:e.name}),(0,o.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Tamanho: ",(e.size/1024/1024).toFixed(2)," MB"]}),(0,o.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Views: ",e.views]}),e.date_upload&&(0,o.jsxs)(c.A,{variant:"caption",display:"block",children:["Enviado em: ",new Date(e.date_upload).toLocaleDateString()]}),(0,o.jsx)(u.A,{variant:"contained",color:"primary",onClick:()=>w.push("/file/".concat(e.id)),sx:{mt:2},children:"Visualizar"})]})},e.id))]})]})]})}},4906:(e,t,a)=>{Promise.resolve().then(a.bind(a,1057))}},e=>{var t=t=>e(e.s=t);e.O(0,[295,657,441,684,358],()=>t(4906)),_N_E=e.O()}]);