(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9943:function(r,e,o){Promise.resolve().then(o.bind(o,4413))},4413:function(r,e,o){"use strict";o.r(e),o.d(e,{default:function(){return u}});var s=o(3827),a=o(4090),t=o(8620).Buffer;class i{async getUserFiles(){try{if(!this.apiKey)return console.error("API key n\xe3o fornecida. Imposs\xedvel obter arquivos do usu\xe1rio."),{success:!1,error:"API key n\xe3o fornecida. Imposs\xedvel obter arquivos do usu\xe1rio.",files:[]};let r=await this.fetchWithAuth("/user/files");if(console.log("Resposta da API ao obter arquivos do usu\xe1rio:",r),!1===r.success)return console.error("Erro ao buscar arquivos do usu\xe1rio:",r.error),{success:!1,error:r.error||"Erro ao buscar arquivos do usu\xe1rio",files:[]};return{success:!0,files:Array.isArray(r)?r:[]}}catch(r){return console.error("Erro cr\xedtico ao buscar arquivos do usu\xe1rio:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido",files:[]}}}async getUserLists(){try{if(!this.apiKey)return console.error("API key n\xe3o fornecida. Imposs\xedvel obter listas do usu\xe1rio."),{success:!1,error:"API key n\xe3o fornecida. Imposs\xedvel obter listas do usu\xe1rio.",albums:[]};let r=await this.fetchWithAuth("/user/lists");if(console.log("Resposta da API ao obter listas do usu\xe1rio:",r),!1===r.success)return console.error("Erro ao buscar listas do usu\xe1rio:",r.error),{success:!1,error:r.error||"Erro ao buscar listas do usu\xe1rio",albums:[]};return{success:!0,albums:Array.isArray(r)?r:[]}}catch(r){return console.error("Erro cr\xedtico ao buscar listas do usu\xe1rio:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido",albums:[]}}}async getFileInfo(r){try{if(!r)return console.error("ID do arquivo n\xe3o fornecido"),{success:!1,error:"ID do arquivo n\xe3o fornecido"};let e=await this.fetchWithAuth("/file/".concat(r,"/info"));if(console.log("Resposta da API ao obter informa\xe7\xf5es do arquivo ".concat(r,":"),e),!1===e.success)return console.error("Erro ao buscar informa\xe7\xf5es do arquivo ".concat(r,":"),e.error),{success:!1,error:e.error||"Erro ao buscar informa\xe7\xf5es do arquivo ".concat(r)};return{success:!0,file:e}}catch(e){return console.error("Erro cr\xedtico ao buscar informa\xe7\xf5es do arquivo ".concat(r,":"),e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async getListDetails(r){try{if(!r)return console.error("ID da lista n\xe3o fornecido"),{success:!1,error:"ID da lista n\xe3o fornecido",album:null};let e=await this.fetchWithAuth("/list/".concat(r));if(console.log("Resposta da API ao obter detalhes da lista ".concat(r,":"),e),!1===e.success)return console.error("Erro ao buscar detalhes da lista ".concat(r,":"),e.error),{success:!1,error:e.error||"Erro ao buscar detalhes da lista ".concat(r),album:null};return{success:!0,album:e}}catch(e){return console.error("Erro cr\xedtico ao buscar detalhes da lista ".concat(r,":"),e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido",album:null}}}async createList(r){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];try{if(!this.apiKey)return console.error("API key n\xe3o fornecida. Imposs\xedvel criar lista."),{success:!1,error:"API key n\xe3o fornecida. Imposs\xedvel criar lista.",listId:null};if(!r)return console.error("T\xedtulo da lista n\xe3o fornecido"),{success:!1,error:"T\xedtulo da lista n\xe3o fornecido",listId:null};let s=await this.fetchWithAuth("/list",{method:"POST",body:JSON.stringify({title:r,description:e,anonymous:!1,files:o})});if(console.log("Resposta da API ao criar lista:",s),!1===s.success)return console.error("Erro ao criar lista:",s.error||s.message),{success:!1,error:s.error||s.message||"Erro desconhecido ao criar lista",listId:null};return{success:!0,listId:s.id}}catch(r){return console.error("Erro cr\xedtico ao criar lista:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido",listId:null}}}async addFileToList(r,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{if(!this.apiKey)return console.error("API key n\xe3o fornecida. Imposs\xedvel adicionar arquivo \xe0 lista."),{success:!1,error:"API key n\xe3o fornecida. Imposs\xedvel adicionar arquivo \xe0 lista."};if(!r)return console.error("ID da lista n\xe3o fornecido"),{success:!1,error:"ID da lista n\xe3o fornecido"};if(!e)return console.error("ID do arquivo n\xe3o fornecido"),{success:!1,error:"ID do arquivo n\xe3o fornecido"};let s=await this.getListDetails(r);if(!s.success)return{success:!1,error:"Erro ao obter detalhes da lista: ".concat(s.error)};let a=s.album,t=a.files||[];if(t.some(r=>r.id===e))return console.log("Arquivo ".concat(e," j\xe1 existe na lista ").concat(r)),{success:!0,message:"Arquivo j\xe1 existe na lista"};t.push({id:e,description:o});let i=await this.fetchWithAuth("/list/".concat(r),{method:"PUT",body:JSON.stringify({title:a.title,description:a.description,files:t})});if(console.log("Resposta da API ao adicionar arquivo ".concat(e," \xe0 lista ").concat(r,":"),i),!1===i.success)return console.error("Erro ao adicionar arquivo ".concat(e," \xe0 lista ").concat(r,":"),i.error),{success:!1,error:i.error||"Erro ao adicionar arquivo \xe0 lista"};return{success:!0}}catch(o){return console.error("Erro cr\xedtico ao adicionar arquivo ".concat(e," \xe0 lista ").concat(r,":"),o),{success:!1,error:o instanceof Error?o.message:"Erro desconhecido"}}}async removeFileFromList(r,e){try{if(!this.apiKey)return console.error("API key n\xe3o fornecida. Imposs\xedvel remover arquivo da lista."),{success:!1,error:"API key n\xe3o fornecida. Imposs\xedvel remover arquivo da lista."};if(!r)return console.error("ID da lista n\xe3o fornecido"),{success:!1,error:"ID da lista n\xe3o fornecido"};if(!e)return console.error("ID do arquivo n\xe3o fornecido"),{success:!1,error:"ID do arquivo n\xe3o fornecido"};let o=await this.getListDetails(r);if(!o.success)return{success:!1,error:"Erro ao obter detalhes da lista: ".concat(o.error)};let s=o.album,a=(s.files||[]).filter(r=>r.id!==e),t=await this.fetchWithAuth("/list/".concat(r),{method:"PUT",body:JSON.stringify({title:s.title,description:s.description,files:a})});if(console.log("Resposta da API ao remover arquivo ".concat(e," da lista ").concat(r,":"),t),!1===t.success)return console.error("Erro ao remover arquivo ".concat(e," da lista ").concat(r,":"),t.error),{success:!1,error:t.error||"Erro ao remover arquivo da lista"};return{success:!0}}catch(o){return console.error("Erro cr\xedtico ao remover arquivo ".concat(e," da lista ").concat(r,":"),o),{success:!1,error:o instanceof Error?o.message:"Erro desconhecido"}}}async deleteFile(r){try{if(!this.apiKey)return console.error("API key n\xe3o fornecida. Imposs\xedvel excluir arquivo."),{success:!1,error:"API key n\xe3o fornecida. Imposs\xedvel excluir arquivo."};if(!r)return console.error("ID do arquivo n\xe3o fornecido"),{success:!1,error:"ID do arquivo n\xe3o fornecido"};let e=await this.fetchWithAuth("/file/".concat(r),{method:"DELETE"});if(console.log("Resposta da API ao excluir arquivo ".concat(r,":"),e),!1===e.success)return console.error("Erro ao excluir arquivo ".concat(r,":"),e.error),{success:!1,error:e.error||"Erro ao excluir arquivo"};return{success:!0}}catch(e){return console.error("Erro cr\xedtico ao excluir arquivo ".concat(r,":"),e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}getFileUrl(r){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!r)return"";let o="".concat(this.baseUrl,"/file/").concat(r);return e?"".concat(o,"?download"):o}getThumbnailUrl(r){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;return r?(e=Math.min(128,16*Math.round(e/16)),o=Math.min(128,16*Math.round(o/16)),"".concat(this.baseUrl,"/file/").concat(r,"/thumbnail?width=").concat(e,"&height=").concat(o)):""}async fetchWithAuth(r){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let o=r.startsWith("/")?r:"/".concat(r),s=new URL(o,this.baseUrl),a=new Headers(e.headers);if(a.append("Accept","application/json"),this.apiKey){let r="Basic ".concat(t.from(":".concat(this.apiKey)).toString("base64"));a.append("Authorization",r)}let i=await fetch(s.toString(),{...e,headers:a}),c=i.clone();if(!i.ok){let r;try{if((r=await c.text()).trim().startsWith("{")||r.trim().startsWith("["))try{let e=JSON.parse(r);return{success:!1,error:"API do Pixeldrain retornou erro: ".concat(i.status," ").concat(i.statusText),details:e}}catch(r){console.error("Erro ao processar JSON de erro:",r)}if(r.includes("<!DOCTYPE")||r.includes("<html"))return console.error("API retornou HTML em vez de JSON",r.substring(0,500)),{success:!1,error:"A resposta cont\xe9m HTML em vez de JSON. Poss\xedvel erro na API.",text:r.substring(0,500)};return{success:!1,error:"API do Pixeldrain retornou erro: ".concat(i.status," ").concat(i.statusText),text:r.substring(0,500)}}catch(r){return console.error("Erro ao ler resposta como texto:",r),{success:!1,error:"API do Pixeldrain retornou erro ".concat(i.status," sem dados adicionais")}}}try{let r=i.headers.get("content-type")||"";if(r.includes("application/json"))return await i.json();{let e=await c.text();if(e.trim().startsWith("{")||e.trim().startsWith("["))try{return JSON.parse(e)}catch(r){console.error("Erro ao interpretar como JSON:",r)}return{success:!0,contentType:r,text:e}}}catch(r){return console.error("Erro ao processar dados da resposta:",r),{success:!1,error:"Erro ao processar resposta da API do Pixeldrain",details:r instanceof Error?r.message:String(r)}}}catch(r){return console.error("Erro na requisi\xe7\xe3o:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido na requisi\xe7\xe3o"}}}async fetchWithProxy(r){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetchWithAuth(r,e)}async getAllUserContent(){try{let[r,e]=await Promise.all([this.getUserFiles(),this.getUserLists()]),o=r.success?r.files:[],s=e.success?e.albums:[],a=await Promise.all(s.map(async r=>{try{let e=await this.getListDetails(r.id);if(e.success&&e.album)return e.album;return r}catch(e){return console.error("Erro ao carregar detalhes do \xe1lbum ".concat(r.id,":"),e),r}}));return{success:!0,files:o,albums:a}}catch(r){return console.error("Erro ao carregar conte\xfado do usu\xe1rio:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido",files:[],albums:[]}}}constructor(r){this.baseUrl="https://pixeldrain.com/api",r&&r.trim().length>0?this.apiKey=r.trim():this.apiKey="",console.log("PixeldrainService inicializado"+(this.apiKey?" com a chave: "+this.apiKey.substring(0,5)+"..."+this.apiKey.substring(this.apiKey.length-5):" sem chave API (modo an\xf4nimo)"))}}var c=o(8792),n=o(4454),l=o.n(n);function u(){let[r,e]=(0,a.useState)(null),[o,t]=(0,a.useState)("aa73d120-100e-426e-93ba-c7e1569b0322"),[n,u]=(0,a.useState)([]),[d,h]=(0,a.useState)(!0),[m,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{let r=localStorage.getItem("pixeldrain_api_key");r?t(r):localStorage.setItem("pixeldrain_api_key",o),f(r||o)},[]);let f=async r=>{h(!0),e(null),p(null);try{let s=new i(r);console.log("Buscando \xe1lbuns...");let a=await s.getUserLists();if(console.log("Resposta da API:",a),!1===a.success)e("Erro ao conectar com a API do Pixeldrain: ".concat(a.error)),p(a),u([]);else{var o;u(a.albums||[]),(null===(o=a.albums)||void 0===o?void 0:o.length)===0&&console.log("Nenhum \xe1lbum encontrado")}}catch(r){console.error("Erro ao buscar \xe1lbuns:",r),e("Erro ao conectar com a API do Pixeldrain: ".concat(r instanceof Error?r.message:"Erro desconhecido")),p({error:r instanceof Error?r.toString():JSON.stringify(r)}),u([])}finally{h(!1)}};return(0,s.jsxs)("main",{className:l().main,children:[(0,s.jsxs)("div",{className:l().header,children:[(0,s.jsx)("h1",{className:l().title,children:"Pixeldrain Album Manager"}),(0,s.jsx)("p",{className:l().description,children:"Uma interface web para gerenciar seus \xe1lbuns no Pixeldrain"})]}),(0,s.jsxs)("div",{className:l().apiKeyContainer,children:[(0,s.jsx)("h2",{children:"API Key do Pixeldrain"}),(0,s.jsxs)("div",{className:l().inputContainer,children:[(0,s.jsx)("input",{type:"text",value:o,onChange:r=>{t(r.target.value)},placeholder:"Insira sua API key do Pixeldrain",className:l().apiKeyInput}),(0,s.jsx)("button",{onClick:()=>{localStorage.setItem("pixeldrain_api_key",o),f(o)},className:l().button,children:"Salvar e Carregar"})]}),(0,s.jsxs)("p",{className:l().apiKeyInfo,children:["A API key deve estar no formato UUID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.",(0,s.jsx)("br",{}),"Voc\xea pode encontrar sua API key nas configura\xe7\xf5es da sua conta no site oficial do Pixeldrain."]})]}),(0,s.jsx)("h2",{className:l().sectionTitle,children:"Seus \xc1lbuns"}),d?(0,s.jsx)("div",{className:l().loading,children:"Carregando \xe1lbuns..."}):r?(0,s.jsxs)("div",{className:l().error,children:[(0,s.jsx)("div",{className:l().errorIcon,children:"⚠️"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:r}),(0,s.jsxs)("div",{className:l().possibleSolutions,children:[(0,s.jsx)("h3",{children:"Poss\xedveis solu\xe7\xf5es:"}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["Verifique se a chave API est\xe1 correta em ",(0,s.jsx)("code",{children:"app/services/pixeldrain.ts"})]}),(0,s.jsx)("li",{children:"A API do Pixeldrain pode estar temporariamente indispon\xedvel. Tente novamente mais tarde."}),(0,s.jsx)("li",{children:"Verifique sua conex\xe3o com a internet."}),(0,s.jsx)("li",{children:"Certifique-se de que a API key tem o formato adequado (UUID)."}),(0,s.jsx)("li",{children:"O servidor do Pixeldrain pode estar rejeitando solicita\xe7\xf5es. Verifique se h\xe1 restri\xe7\xf5es ou limites de uso."})]}),(0,s.jsx)("button",{onClick:()=>f(o),className:l().retryButton,children:"Tentar novamente"})]}),m&&(0,s.jsxs)("div",{className:l().debugInfo,children:[(0,s.jsx)("h3",{children:"Informa\xe7\xf5es de depura\xe7\xe3o:"}),(0,s.jsx)("pre",{children:JSON.stringify(m,null,2)})]})]})]}):0===n.length?(0,s.jsxs)("div",{className:l().noAlbums,children:[(0,s.jsx)("p",{children:"Nenhum \xe1lbum encontrado na sua conta."}),(0,s.jsx)("p",{children:"Voc\xea pode criar \xe1lbuns no site oficial do Pixeldrain."})]}):(0,s.jsx)("div",{className:l().albumGrid,children:n.map(r=>(0,s.jsxs)("div",{className:l().albumCard,children:[(0,s.jsx)("h3",{className:l().albumTitle,children:r.title}),(0,s.jsx)("p",{className:l().albumDescription,children:r.description||"Sem descri\xe7\xe3o"}),(0,s.jsxs)("div",{className:l().albumMeta,children:[(0,s.jsxs)("span",{children:["ID: ",r.id]}),r.date_created&&(0,s.jsx)("span",{children:new Date(r.date_created).toLocaleDateString()}),(0,s.jsxs)("span",{children:["Arquivos: ",r.file_count||0]})]}),(0,s.jsx)(c.default,{href:"/album/".concat(r.id),className:l().albumLink,children:"Ver Detalhes"})]},r.id))}),(0,s.jsx)("div",{className:l().externalLink,children:(0,s.jsx)("a",{href:"https://pixeldrain.com",target:"_blank",rel:"noopener noreferrer",className:l().visitButton,children:"Visitar Pixeldrain"})})]})}},4454:function(r){r.exports={main:"page_main__nw1Wk",header:"page_header__oRW75",title:"page_title__po7na",description:"page_description__lvaOp",apiKeyContainer:"page_apiKeyContainer__krCLk",inputContainer:"page_inputContainer__jqdjd",apiKeyInput:"page_apiKeyInput__XWguX",button:"page_button__52WaL",apiKeyInfo:"page_apiKeyInfo__nqGEp",sectionTitle:"page_sectionTitle__6ic_4",loading:"page_loading__4WMny",error:"page_error__JBrsB",errorIcon:"page_errorIcon__OP7HL",possibleSolutions:"page_possibleSolutions__O42uO",retryButton:"page_retryButton__rXSBT",debugInfo:"page_debugInfo__5Cmp3",noAlbums:"page_noAlbums__Uz9JT",albumGrid:"page_albumGrid__qDScW",albumCard:"page_albumCard__sk8_B",albumTitle:"page_albumTitle__iPwiP",albumDescription:"page_albumDescription___3HBZ",albumMeta:"page_albumMeta__Ro4gd",albumLink:"page_albumLink__sjjIV",externalLink:"page_externalLink__TPYh2",visitButton:"page_visitButton__DYipS"}}},function(r){r.O(0,[373,971,69,744],function(){return r(r.s=9943)}),_N_E=r.O()}]);